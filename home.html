---
layout: default
title: Home
permalink: /home
---
<main class="container">
  <h1>最新記事</h1>
  <div id="post-list">読み込み中…</div>
</main>
<script>
  // GitHub Pages の baseurl を Liquid で取得
  const BASE_URL = "{{ site.baseurl }}";
  const postList = document.getElementById('post-list');

  db.collection('posts').orderBy('createdAt', 'desc').get()
    .then(snapshot => {
      postList.innerHTML = '';  // 読み込み中メッセージをクリア
      snapshot.forEach(doc => {
        const post = doc.data();
        // リンク生成に baseurl を含める
        const link = `${BASE_URL}/${post.slug}`;
        const item = document.createElement('article');
        item.innerHTML = `
          <h2><a href="${link}">${post.title}</a></h2>
          <p>カテゴリ: ${post.category}</p>
        `;
        postList.appendChild(item);
      });
    })
    .catch(err => {
      postList.innerHTML = `<p>記事の読み込みに失敗しました: ${err.message}</p>`;
    });
</script>
